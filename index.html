<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>طلب إذن الموقع الجغرافي</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
            padding: 20px;
        }
        #status {
            margin: 20px;
            padding: 15px;
            border-radius: 5px;
            background-color: #f0f0f0;
        }
        #locationInfo {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f5e9;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <h1>طلب إذن الوصول إلى موقعك الجغرافي</h1>
    <div id="status">جاري طلب إذن الوصول إلى موقعك...</div>
    <div id="locationInfo">
        <h2>معلومات موقعك:</h2>
        <p><strong>خط العرض:</strong> <span id="latitude"></span></p>
        <p><strong>خط الطول:</strong> <span id="longitude"></span></p>
        <p><strong>الدقة:</strong> <span id="accuracy"></span> متر</p>
    </div>

    <script>
        const statusDiv = document.getElementById('status');
        const locationInfoDiv = document.getElementById('locationInfo');
        const latitudeSpan = document.getElementById('latitude');
        const longitudeSpan = document.getElementById('longitude');
        const accuracySpan = document.getElementById('accuracy');

        // طلب إذن الموقع عند تحميل الصفحة
        window.addEventListener('DOMContentLoaded', () => {
            requestLocationPermission();
        });

        function requestLocationPermission() {
            if (!navigator.geolocation) {
                statusDiv.textContent = 'متصفحك لا يدعم خدمة الموقع الجغرافي';
                statusDiv.style.backgroundColor = '#ffebee';
                return;
            }

            statusDiv.textContent = 'جاري طلب إذن الوصول إلى موقعك...';
            
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    // عند منح الإذن بنجاح
                    showLocation(position);
                },
                (error) => {
                    // عند رفض الإذن أو حدوث خطأ
                    handleLocationError(error);
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }

        function showLocation(position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            const accuracy = position.coords.accuracy;
            
            latitudeSpan.textContent = latitude;
            longitudeSpan.textContent = longitude;
            accuracySpan.textContent = accuracy;
            
            statusDiv.textContent = 'تم الحصول على الموقع بنجاح!';
            statusDiv.style.backgroundColor = '#e8f5e9';
            locationInfoDiv.style.display = 'block';
            
            // يمكنك هنا إرسال البيانات إلى الخادم إذا لزم الأمر
            // sendLocationToServer(latitude, longitude);
        }

        function handleLocationError(error) {
            let message = '';
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    message = 'تم رفض إذن الوصول إلى الموقع';
                    break;
                case error.POSITION_UNAVAILABLE:
                    message = 'معلومات الموقع غير متاحة';
                    break;
                case error.TIMEOUT:
                    message = 'انتهى وقت طلب الموقع';
                    break;
                case error.UNKNOWN_ERROR:
                    message = 'حدث خطأ غير معروف';
                    break;
            }
            statusDiv.textContent = message;
            statusDiv.style.backgroundColor = '#ffebee';
        }
    </script>
</body>
</html>1
